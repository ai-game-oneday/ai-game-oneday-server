ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\tenacity\__init__.py", line 478, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\google\genai\_api_client.py", line 869, in _request_once        
    errors.APIError.raise_for_response(response)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\google\genai\errors.py", line 106, in raise_for_response        
    raise ServerError(status_code, response_json, response)
google.genai.errors.ServerError: 503 UNAVAILABLE. {'error': {'code': 503, 'message': 'The model is overloaded. Please try again later.', 'status': 'UNAVAILABLE'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi      
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__      
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\_utils.py", line 82, in collapse_excgroups
    raise exc
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\server.py", line 65, in add_security_headers
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\base.py", line 156, in call_next
    raise app_exc
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__       
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app       
    raise exc
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app       
    await app(scope, receive, sender)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app       
    raise exc
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app       
    await app(scope, receive, sender)
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\server.py", line 133, in generate_fish
    enhanced_prompt = llm.enhance_prompt(request.prompt) + ", full body"
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\llm.py", line 18, in enhance_prompt
    resp = client.models.generate_content(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\google\genai\models.py", line 5821, in generate_content
    response = self._generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\google\genai\models.py", line 4780, in _generate_content        
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\google\genai\_api_client.py", line 986, in request
    response = self._request(http_request, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\google\genai\_api_client.py", line 879, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\tenacity\__init__.py", line 475, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\tenacity\__init__.py", line 376, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "E:\projects\ai-game-oneday\.venv\Lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x2359fea8c50 state=finished raised ServerError>]